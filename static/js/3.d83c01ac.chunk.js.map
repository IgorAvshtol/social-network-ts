{"version":3,"sources":["components/Users/users.module.css","components/Users/Paginator.module.css","components/Users/Paginator.tsx","redux/users-selectors.ts","components/Users/Users.tsx","components/Users/UserContainerFC.tsx"],"names":["module","exports","Paginator","props","pagesCount","Math","ceil","totalUsersCount","pageSize","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","className","styles","paginator","onClick","filter","p","map","cn","selectedPage","currentPage","pageNumber","e","onPageChanged","getUserSelector","state","usersPage","users","getPageSize","getTotalUsersCount","getCurrentPage","getIsFatching","isFatching","getFollowInProgress","followingInProgress","Users","useSelector","dispatch","useDispatch","u","to","id","src","photos","small","userPhoto","followed","disabled","some","userId","unfollow","follow","name","status","Users小ontainerFC","useEffect","getUsers","loader"],"mappings":"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","file":"static/js/3.d83c01ac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"userPhoto\":\"users_userPhoto__mPJPf\",\"selectedPage\":\"users_selectedPage__3g8Up\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__2ea92\",\"pageNumber\":\"Paginator_pageNumber__bfszL\",\"selectedPage\":\"Paginator_selectedPage__3T-9C\"};","import React, {useState} from \"react\";\nimport styles from \"./Paginator.module.css\";\nimport cn from \"classnames\"\n\n\ntype PaginatorType = {\n    pageSize: number,\n    currentPage: number,\n    totalUsersCount: number,\n    onPageChanged: (p: number) => void\n}\n\nconst Paginator = (props: PaginatorType) => {\n\n    let portionSize = 10\n\n    let pagesCount = Math.ceil(props.totalUsersCount / props.pageSize)\n    let pages = []\n\n    for (let i = 1; i <= pagesCount; i++) {\n        pages.push(i)\n    }\n\n    let portionCount = Math.ceil(pagesCount / portionSize)\n    let [portionNumber, setPortionNumber] = useState(1)\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\n    let rightPortionPageNumber = portionNumber * portionSize\n    return <div className={styles.paginator}>\n        {portionNumber > 1 &&\n        <button onClick={() => {\n            setPortionNumber(portionNumber - 1)\n        }}>Prev</button>}\n        {pages\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\n            .map((p) => {\n                return <span className={cn({\n                    [styles.selectedPage]: props.currentPage === p\n                }, styles.pageNumber)}\n                             key={p}\n                             onClick={(e) => {\n                                 props.onPageChanged(p)\n                             }}>{p}</span>\n            })}\n        {portionCount > portionNumber &&\n        <button onClick={() => {\n            setPortionNumber(portionNumber + 1)\n        }\n        }>gf</button>}\n    </div>\n}\n\n\nexport default Paginator\n","import React from \"react\";\nimport {AppStateType} from \"./redux-store\";\n\n\nexport const getUserSelector = (state: AppStateType) => {\n    return state.usersPage.users\n}\n\nexport const getPageSize = (state: AppStateType) => {\n    return state.usersPage.pageSize\n}\n\nexport const getTotalUsersCount = (state: AppStateType) => {\n    return state.usersPage.totalUsersCount\n}\n\nexport const getCurrentPage = (state: AppStateType) => {\n    return state.usersPage.currentPage\n}\n\nexport const getIsFatching = (state: AppStateType) => {\n    return state.usersPage.isFatching\n}\n\nexport const getFollowInProgress = (state: AppStateType) => {\n    return state.usersPage.followingInProgress\n}","import styles from \"./users.module.css\";\r\nimport userPhoto from \"../../assets/images/users.jpg\";\r\nimport React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Paginator from \"./Paginator\";\r\nimport {useDispatch, useSelector} from \"react-redux\";\r\nimport {\r\n    getCurrentPage,\r\n    getFollowInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUserSelector\r\n} from \"../../redux/users-selectors\";\r\nimport {follow, unfollow} from \"../../redux/users-reducer\";\r\n\r\n\r\ntype UsersFunctionalType = {\r\n    // users: Array<UsersType>,\r\n    // pageSize: number,\r\n    // currentPage: number,\r\n    // totalUsersCount: number,\r\n    // follow: (userId: number) => void,\r\n    // unfollow: (userId: number) => void,\r\n    onPageChanged: (p: number) => void\r\n    // followingInProgress: Array<FollowingProgressType>\r\n    // toggleFollowingProgress: (isFatching: boolean, userId: number) => void\r\n}\r\n\r\nlet Users = (props: UsersFunctionalType) => {\r\n\r\n\r\n    const users = useSelector(getUserSelector)\r\n    const pageSize = useSelector(getPageSize)\r\n    const totalUsersCount = useSelector(getTotalUsersCount)\r\n    const currentPage = useSelector(getCurrentPage)\r\n    const followingInProgress = useSelector(getFollowInProgress)\r\n\r\n    const dispatch = useDispatch()\r\n\r\n    const Follow = (userId: number) => {\r\n        dispatch(follow(userId))\r\n    }\r\n\r\n    const Unfollow = (userId: number) => {\r\n        dispatch(unfollow(userId))\r\n    }\r\n\r\n\r\n    return <div>\r\n        <Paginator pageSize={pageSize} currentPage={currentPage} totalUsersCount={totalUsersCount} onPageChanged={props.onPageChanged}/>\r\n        {\r\n            users.map(u => <div key={u.id}>\r\n                <span>\r\n                    <div>\r\n                        <NavLink to={\"/profile/\" + u.id}>\r\n                        <img src={u.photos.small != null ? u.photos.small : userPhoto} className={styles.userPhoto}/>\r\n                            </NavLink>\r\n                    </div>\r\n                    <div>\r\n                        {u.followed\r\n                            ? <button disabled={followingInProgress.some(id => id === u.id)} onClick={() => {\r\n                                Unfollow(u.id)\r\n                                // props.toggleFollowingProgress(true, u.id)\r\n                                // usersAPI.unfollow(u.id)\r\n                                // // axios.delete(`https://social-network.samuraijs.com/api/1.0/follow/${u.id}`, {\r\n                                // //     withCredentials: true,\r\n                                // //     headers: {\r\n                                // //         \"API-KEY\": \"38c3a417-44c2-476d-ad1b-ea982c1c54f6\"\r\n                                // //     }\r\n                                // // })\r\n                                //     .then(response => {\r\n                                //         if (response.data.resultCode == 0) {\r\n                                //             props.unfollow(u.id)\r\n                                //         }\r\n                                //         props.toggleFollowingProgress(false, u.id)\r\n                                //     })\r\n                            }}>Unfollow</button>\r\n                            : <button disabled={followingInProgress.some(id => id === u.id)} onClick={() => {\r\n                                Follow(u.id)\r\n                                // props.toggleFollowingProgress(true, u.id)\r\n                                // usersAPI.follow(u.id)\r\n                                // axios.post(`https://social-network.samuraijs.com/api/1.0/follow/${u.id}`, {}, {\r\n                                //     withCredentials: true,\r\n                                //     headers: {\r\n                                //         \"API-KEY\": \"38c3a417-44c2-476d-ad1b-ea982c1c54f6\"\r\n                                //     }\r\n                                // })\r\n                                //     .then(response => {\r\n                                //         if (response.data.resultCode == 0) {\r\n                                //             props.follow(u.id)\r\n                                //         }\r\n                                //         props.toggleFollowingProgress(false, u.id)\r\n                                //     })\r\n                            }}>Follow</button>}\r\n                    </div>\r\n                </span>\r\n                <span>\r\n                    <span>\r\n                        <div>{u.name}</div><div>{u.status}</div>\r\n                    </span>\r\n                    <span>\r\n                        <div>{'u.location.city'}</div><div>{'u.location.country'}</div>\r\n                    </span>\r\n                </span>\r\n            </div>)\r\n        }\r\n        <button>More</button>\r\n    </div>\r\n\r\n}\r\n\r\n\r\n\r\n\r\nexport default Users\r\n\r\n","import React, {useEffect} from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {getUsers} from \"../../redux/users-reducer\";\nimport Users from \"./Users\";\nimport loader from \"./../../assets/images/loader.png\"\nimport {getCurrentPage, getIsFatching, getPageSize} from \"../../redux/users-selectors\";\n\n\n// type UsersComponentType = {\n//     users: Array<UsersType>\n//     pageSize: number,\n//     totalUsersCount: number,\n//     currentPage: number,\n//     follow: (userId: number) => void,\n//     unfollow: (userId: number) => void,\n//     // setusers: (users: Array<UsersType>) => void,\n//     setTotalUsersCount: (totalUsersCount: number) => void,\n//     // setCurrentPage: (currentPage: number) => void,\n//     isFatching: boolean,\n//     // toggleIsFatching: (isFatching: boolean) => void\n//     // toggleFollowingProgress: (isFatching: boolean, userId: number) => void\n//     followingInProgress: Array<FollowingProgressType>\n//     getUsers: (currentPage: number, pageSize: number) => void\n//\n// }\n\n\nfunction Users小ontainerFC() {\n\n    const isFatching = useSelector(getIsFatching)\n    const currentPage = useSelector(getCurrentPage)\n    const pageSize = useSelector(getPageSize)\n\n    const dispatch = useDispatch()\n\n\n    useEffect(() => {\n        dispatch(getUsers(currentPage, pageSize))\n    }, [])\n    // componentDidMount() {\n    //    props.getUsers(props.currentPage, props.pageSize)\n    // }\n\n    let onPageChanged = (pageNumber: number) => {\n        dispatch(getUsers(pageNumber, pageSize))\n    }\n\n\n\n    return <>\n        {isFatching ? <img src={loader}/> : null}\n        <Users\n            // totalUsersCount={props.totalUsersCount}\n            // pageSize={props.pageSize}\n            // currentPage={props.currentPage}\n            onPageChanged={onPageChanged}\n            // users={props.users}\n            // follow={props.follow}\n            // unfollow={props.unfollow}\n            // toggleFollowingProgress={this.props.toggleFollowingProgress}\n            // followingInProgress={props.followingInProgress}\n        />\n    </>\n}\nexport default Users小ontainerFC\n//\n// let mapStateToProps = (state: AppStateType) => {\n//     return {\n//         users: getUserSelector(state),\n//         pageSize: getPageSize(state),\n//         totalUsersCount: getTotalUsersCount(state),\n//         currentPage: getCurrentPage(state),\n//         isFatching: getIsFatching(state),\n//         followingInProgress: getFollowInProgress(state)\n//     }\n// }\n//\n//\n// export default compose<React.ComponentType>(\n//     connect(mapStateToProps, {\n//         follow,\n//         unfollow,\n//         setTotalUsersCount,\n//         getUsers\n//     }),\n//     withAuthRedirect\n// )(Users小ontainerFC)\n"],"sourceRoot":""}